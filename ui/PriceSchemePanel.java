/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * PriceSchemePanel.java
 *
 * Created on 13-Apr-2011, 3:41:03 PM
 */

package ui;
import java.util.Vector;
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import search.Search;

/**
 *
 * @author cwang01
 */
public class PriceSchemePanel extends javax.swing.JPanel {

    Vector < Vector<String>> data;
    Vector <String> header;
    //Search search = new search

    /** Creates new form PriceSchemePanel */
    public PriceSchemePanel() {
        String dataQuery = "SELECT * FROM pricing";
        String headerQuery = "SELECT * FROM catagories";
        //populates the data Arraylist with the prices
        try {
            ResultSet result = Search.browseGetSQLResult(headerQuery);
            while (result.next()){
                header.add(result.getString(1));
            }
        }
        catch (SQLException ex) {
            Logger.getLogger(PriceSchemePanel.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex) {
            Logger.getLogger(PriceSchemePanel.class.getName()).log(Level.SEVERE, null, ex);
        }

        try{
            ResultSet result = Search.browseGetSQLResult(dataQuery);
            while (result.next()){
                Vector<String> prices = new Vector<String>();
                for(int i = 0;i<header.size();i++)
                    prices.add(result.getString(i));
                data.add(prices);
            }
        }
        catch (ClassNotFoundException ex) {
            Logger.getLogger(PriceSchemePanel.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (SQLException ex) {
            Logger.getLogger(PriceSchemePanel.class.getName()).log(Level.SEVERE, null, ex);
        }

        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        addFormatPriceSchemeButton = new javax.swing.JButton();
        addCategoryPriceSchemeButton = new javax.swing.JButton();
        savePriceSchemeButton = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        priceSchemaTable = new javax.swing.JTable();

        addFormatPriceSchemeButton.setText("Add Format");
        addFormatPriceSchemeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addFormatPriceSchemeButtonActionPerformed(evt);
            }
        });

        addCategoryPriceSchemeButton.setText("Add Category");

        savePriceSchemeButton.setText("Save Changes");
        savePriceSchemeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                savePriceSchemeButtonActionPerformed(evt);
            }
        });

        priceSchemaTable.setModel(new javax.swing.table.DefaultTableModel(
            data,header
        ));
        priceSchemaTable.addAncestorListener(new javax.swing.event.AncestorListener() {
            public void ancestorMoved(javax.swing.event.AncestorEvent evt) {
            }
            public void ancestorAdded(javax.swing.event.AncestorEvent evt) {
                priceSchemaTableAncestorAdded(evt);
            }
            public void ancestorRemoved(javax.swing.event.AncestorEvent evt) {
            }
        });
        jScrollPane2.setViewportView(priceSchemaTable);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(83, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 608, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(addFormatPriceSchemeButton)
                        .addGap(18, 18, 18)
                        .addComponent(addCategoryPriceSchemeButton)
                        .addGap(18, 18, 18)
                        .addComponent(savePriceSchemeButton)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 356, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(savePriceSchemeButton)
                    .addComponent(addCategoryPriceSchemeButton)
                    .addComponent(addFormatPriceSchemeButton))
                .addContainerGap(22, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void addFormatPriceSchemeButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addFormatPriceSchemeButtonActionPerformed
        // TODO add your handling code here:
}//GEN-LAST:event_addFormatPriceSchemeButtonActionPerformed

    private void savePriceSchemeButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_savePriceSchemeButtonActionPerformed
        // TODO add your handling code here:
}//GEN-LAST:event_savePriceSchemeButtonActionPerformed

    private void priceSchemaTableAncestorAdded(javax.swing.event.AncestorEvent evt) {//GEN-FIRST:event_priceSchemaTableAncestorAdded
        // TODO add your handling code here:
}//GEN-LAST:event_priceSchemaTableAncestorAdded


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton addCategoryPriceSchemeButton;
    private javax.swing.JButton addFormatPriceSchemeButton;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable priceSchemaTable;
    private javax.swing.JButton savePriceSchemeButton;
    // End of variables declaration//GEN-END:variables

}
